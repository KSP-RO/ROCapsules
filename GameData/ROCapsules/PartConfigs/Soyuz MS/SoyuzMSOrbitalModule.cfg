PART
{
	name = ROC-SoyuzMSOM
	module = Part
	author = DECQ

	RSSROConfig = True

	//	============================================================================
	//	Model and Dimensions
	//	============================================================================

	MODEL
	{
		model = ROCapsules/Assets/DECQ/SoyuzMS/BO
	}

	scale = 1.0
	rescaleFactor = 1.0

	node_stack_top = 0.0, 1.243, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -1.032, 0.0, 0.0, -1.0, 0.0, 2
	node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0

	attachRules = 1,0,1,1,0

	//	============================================================================
	//	Title, Description, Category, Techs
	//	============================================================================

	TechRequired = unlockParts
	cost = 150
	entryCost = 1
	category = Pods
	subcategory = 0

	title = Soyuz TM/TMA/MS Orbital Module
	manufacturer = RKK Energia
	description = The Orbital Module (BO) of the Soyuz contains everything that it is not needed for reentry. This includes the docking system, the airlock and the KURS automatic docking antennas. It is jettisoned before entering the atmosphere.
	tags = soyuz, progress, DECQ

	bulkheadProfiles = srf, size2

	//	============================================================================
	//	Thermo, Durability
	//	============================================================================

	mass = 1.05
	dragModelType = default
	maximum_drag = 0.25
	minimum_drag = 0.25
	angularDrag = 0.5
	crashTolerance = 10
	breakingForce = 250
	breakingTorque = 250
	maxTemp = 673.15
	skinMaxTemp = 673.15
	stagingIcon = DECOUPLER_HOR
	stageOffset = 1
	childStageOffset = 1

	//	============================================================================
	//	Modules and Resources
	//	============================================================================

	MODULE
	{
		name = ModuleDecouple
		menuName = Jettison Orbital Module
		ejectionForce = 100
		isOmniDecoupler = False
		explosiveNodeID = bottom
	}

	MODULE
	{
		name = ModuleAnimateGeneric
		animationName = ANTENNA
		isOneShot = False
		allowManualControl = True
		startEventGUIName = Deploy KURS Antenna
		endEventGUIName = Retract KURS Antenna
		actionGUIName = Toggle KURS Antenna
		allowAnimationWhileShielded = False
	}

	MODULE
	{
		name = ModuleLight
		lightName = light
		useAnimationDim = True
		lightBrightenSpeed = 9
		lightDimSpeed = 9
		animationName = LIGHT_SOYUZ
		resourceAmount = 0.075
		useResources = true
	}

	MODULE:NEEDS[ConnectedLivingSpace]
	{
		name = ModuleConnectedLivingSpace
		passable = True
		passableWhenSurfaceAttached = False
		surfaceAttachmentsPassable = False
		impassablenodes = F1, F2
	}
}

//	==================================================
//	TAC Life Support compatibility.
//	==================================================

@PART[ROC-SoyuzMSOM]:FOR[RealismOverhaul]:NEEDS[TacLifeSupport]
{
	@description ^= :$: Provides support resources for a crew of 3 for up to 30 days.

	@mass -= 0.315

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 1930
		basemass = -1
		//	Food (capacity for 720 hours).
		TANK
		{
			name = Food
			amount = 263.5
			maxAmount = 526.5
		}
		//	Water (capacity for 720 hours).
		TANK
		{
			name = Water
			amount = 174.2
			maxAmount = 348.4
		}
		//	Oxygen (capacity for 720 hours).
		TANK
		{
			name = Oxygen
			amount = 26632.8
			maxAmount = 53265.6
		}
		//	Solid waste (capacity for 720 hours).
		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 47.9
		}
		//	Liquid waste (capacity for 720 hours).
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 443.3
		}
		//  Carbon Dioxide (capacity for 720 hours).
		TANK
		{
			name = CarbonDioxide
			amount = 0
			maxAmount = 46033.9
		}
		//  CO2 scrubber canisters (capacity for 720 hours).
		TANK
		{
			name = PotassiumSuperoxide
			amount = 16.7
			maxAmount = 66.6
		}
	}

	MODULE
	{
		name = TacGenericConverter
		converterName = CO2 Scrubber
		StartActionName = Start CO2 Scrubber
		StopActionName = Stop CO2 Scrubber
		tag = Life Support
		conversionRate = 3.0
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio = 0.00589121
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.01
		}

		INPUT_RESOURCE
		{
			ResourceName = PotassiumSuperoxide
			Ratio = 0.0000085683
		}

		OUTPUT_RESOURCE
		{
			ResourceName = WasteWater
			Ratio = 0.0032924498
			DumpExcess = True
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.0000257297
			DumpExcess = False
		}
	}
}

//	================================================================================
//	Configure RealAntennas
//	================================================================================

@PART[ROC-SoyuzMSOM]:BEFORE[RealAntennas]:NEEDS[RealAntennas]
{
	!MODULE[ModuleDataTransmitter],* {}
	MODULE
	{
		name = ModuleRealAntenna
		referenceGain = 0.5
		RFBand = S		//Default to S-band
	}
}
