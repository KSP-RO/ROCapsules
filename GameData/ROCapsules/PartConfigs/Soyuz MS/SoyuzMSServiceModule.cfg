PART
{
	name = ROC-SoyuzMSServiceModule
	module = Part
	author = DECQ

	RSSROConfig = True

	//	============================================================================
	//	Model and Dimensions
	//	============================================================================

	MODEL
	{
		model = ROCapsules/Assets/DECQ/SoyuzMS/PAO
	}

	scale = 1.0
	rescaleFactor = 1.0

	node_stack_top = 0.0, 1.837, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -0.301, 0.0, 0.0, -1.0, 0.0, 2
	node_stack_DA = 0.8350143, -0.3357558, 0.7922449, 0.0, -1.0, 0.0, 1
	//node_stack_US = 0.0, 1.786255, -1.18829, 0.0, -1.0, 0.0, 1
	node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0

	CoMOffset = 0, 0.15, 0.0

	attachRules = 1,0,1,1,0

	//	============================================================================
	//	Title, Description, Category, Techs
	//	============================================================================

	TechRequired = unlockParts
	cost = 150
	entryCost = 1
	category = Engine
	subcategory = 0

	title = Soyuz TM/TMA/MS Service Module
	manufacturer = RKK Energia
	description = The Soyuz Instrument and Service Module (PAO) contains everything that the Soyuz needs for orbital operations. It is jettisoned just before reentry.
	tags = soyuz, progress, DECQ

	bulkheadProfiles = size2

	//	============================================================================
	//	Thermo, Durability
	//	============================================================================

	mass = 1.85
	dragModelType = default
	maximum_drag = 0.25
	minimum_drag = 0.25
	angularDrag = 0.5
	crashTolerance = 10
	breakingForce = 250
	breakingTorque = 250
	maxTemp = 673.15
	skinMaxTemp = 673.15
	stagingIcon = LIQUID_ENGINE
	stageOffset = 1
	childStageOffset = 1
	radiatorHeadroom = 0.4427

	//	============================================================================
	//	Animations and Textures
	//	============================================================================

	EFFECTS
	{
		running1
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = thrustTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.02 0.1
				volume = 0.5 0.1
				volume = 1.0 0.1
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_big
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.1 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90, 0, 0
			}
		}
		control
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = DPO_B
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.02 0.1
				volume = 0.5 0.1
				volume = 1.0 0.1
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = DPO_B
				emission = 0.0 0.0
				emission = 0.1 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90, 0, 0
			}
		}	
		control1
		{
			AUDIO_MULTI_POOL
			{
				channel = Ship
				transformName = DPO_M
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.02 0.1
				volume = 0.5 0.1
				volume = 1.0 0.1
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = DPO_M
				emission = 0.0 0.0
				emission = 0.1 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90, 0, 0
			}
		}
	}

	//	============================================================================
	//	Modules and Resources
	//	============================================================================


	MODULE
	{
		name = ModuleEnginesRF
		thrustVectorTransformName = thrustTransform
		EngineType = LiquidFuel
		engineID = SKD
		runningEffectName = running1
		fxOffset = 0, 0, 0.8
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.75
		maxDistance = 50
		falloff = 1.8
		thrustTransformName = thrustTransform
	}

	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = 1EMISS
		responseSpeed = 0.3
		dependOnEngineState = True
		dependOnThrottle = True
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransform = thrustTransform
		gimbalRange = 5.0
		useGimbalResponseSpeec = True
		gimbalResponseSpeed = 16
	}

	MODULE:NEEDS[!ROEngines]
	{
		name = ModuleAnimateGeneric
		animationName = Default Take
		isOneShot = True
		startEventGUIName = Open SKD Cap
		endEventGUIName = Close SKD Cap
		actionGUIName = Toggle SKD Cap
		allowAnimationWhileShielded = False
	}

	MODULE:NEEDS[ROEngines]
	{
		name = ROEDeployableEngine
		engineID = SKD
		ANIMATIONDATA
		{
			deployLabel = Deploy Engine
			retractLabel = Retract Engine
			ANIMATION
			{
				name = Default Take
			}
		}
	}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = S5.80

		CONFIG
		{
			name = S5.80
			minThrust = 2.95
			maxThrust = 2.95
			heatProduction = 1
			ullage = True
			pressureFed = True
			ignitions = 30

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.1
			}

			PROPELLANT
			{
				name = UDMH
				ratio = 0.4977
				DrawGauge = True
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.5023
				DrawGauge = False
			}

			atmosphereCurve
			{
				key = 0 302
				key = 1 100
			}
		}
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = DPO_M
		thrusterPower = 0.026
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = control1

		PROPELLANT
		{
			name = UDMH
			ratio = 0.4977
		}

		PROPELLANT
		{
			name = NTO
			ratio = 0.5023
		}

		atmosphereCurve
		{
			key = 0 285
			key = 1 100
			key = 4 0.001
		}
	}

	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = DPO_B
		thrusterPower = 0.13
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = control

		PROPELLANT
		{
			name = UDMH
			ratio = 0.4977
		}

		PROPELLANT
		{
			name = NTO
			ratio = 0.5023
		}

		atmosphereCurve
		{
			key = 0 291
			key = 1 100
			key = 4 0.001
		}
	}

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 880
		basemass = -1
		//	Storage batteries 334.8 kWh.
		TANK
		{
			name = ElectricCharge
			amount = 93000
			maxAmount = 93000
		}
		//	KTDU-80 fuel 310 Kg.
		TANK
		{
			name = UDMH
			amount = 390
			maxAmount = 390
		}
		//	KTDU-80 oxidizer 570 Kg.
		TANK
		{
			name = NTO
			amount = 393
			maxAmount = 393
		}
	}

	MODULE
	{
		name = ModuleActiveRadiator
		maxEnergyTransfer = 50.0
		overcoolFactor = 0.4427
		isCoreRadiator = True
		parentCoolingOnly = False

		RESOURCE
		{
			name = ElectricCharge
			rate = 0.3
		}
	}
}