PART
{

	name = ROC-SoyuzParachute
	module = Part
	author = tantares

	RSSROConfig = true

	MODEL
	{
		model = ROCapsules/Assets/Tantares/core_soyuz_v2/tantares_v2_parachute_s0_1
	}
	//Add RCS thrusters for reentry control system
	//pitch, roll, yaw
	//Pitch thrusters
	MODEL	//top
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = 0, -0.1440, 0.4608
		rotation = 350, 0, 0
	}
	MODEL	//bottom
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = 0, -0.3399, 0.5472
		rotation = 160, 0, 0
	}
	//Yaw thrusters
	MODEL	//left
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = 0.3744, -0.1440, 0.1440
		rotation = 0, 0, 270
	}
	MODEL	//right
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = -0.3744, -0.1440, 0.1440
		rotation = 0, 0, 90
	}
	//roll thrusters
	MODEL	//right
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = -0.5760, -0.8641, 0.1440
		rotation = 270, 30, 0
	}
	MODEL
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = -0.5876, -0.9217, 0.1440
		rotation = 270, 30, 0
	}
	MODEL	//left
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = 0.5760, -0.8641, 0.1440
		rotation = 270, 330, 0
	}
	MODEL
	{
		model = RealismOverhaul/Models/LinearRCS
		scale = 0.1, 0.1, 0.1
		position = 0.5876, -0.9217, 0.1440
		rotation = 270, 330, 0
	}

	scale = 1.0
	rescaleFactor = 1.736

	node_stack_bottom = 0.0, -0.0375, 0.0, 0.0, -1.0, 0.0, 0
	node_stack_top    = 0.0,  0.0375, 0.0, 0.0, 1.0, 0.0, 0
	// stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	//	============================================================================
	//	Title, Description, Category, Techs
	//	============================================================================

	title        = Soyuz Parachute
	manufacturer = #roMfrOKB1
	description  = Parachute for Soyuz Descent module.

	mass = 0.070

	category     = Utility
	subcategory  = 0

	tags = soyuz

	TechRequired = unlockParts
	cost = 1
	entryCost = 1

	stageOffset = 1
	childStageOffset = 1

	stagingIcon = PARACHUTES

	//	============================================================================
	//	Thermo, Durability
	//	============================================================================

	crashTolerance = 8
	breakingForce = 250
	breakingTorque = 250
	bodyLiftMultiplier = 0

	//Fiberglass blankets over Aluminum pressure vessel
	skinTempTag = Fiberglass
	internalTempTag = Instruments

	buoyancyUseCubeNamed = PACKED
	sound_parachute_open = activate
	sound_parachute_single = deploy

	//	============================================================================
	//	Modules and Resources
	//	============================================================================

	MODULE
	{
		name = ModuleToggleCrossfeed
		crossfeedStatus = true
		toggleEditor = true
		toggleFlight = true
	}

	//1000 m^2 primary, 590 m^2 backup
	MODULE:NEEDS[!RealChute]
	{
		name = ModuleParachute
		semiDeployedAnimation = tantares_v2_parachute_s0_1_semi
		fullyDeployedAnimation = tantares_v2_parachute_s0_1_full
		invertCanopy = false
		autoCutSpeed = 0.5
		capName = cover
		canopyName = canopy
		stowedDrag = 0.25
		semiDeployedDrag = 1
		fullyDeployedDrag = 500
		minAirPressureToOpen = 0.04
		deployAltitude = 1000
		deploymentSpeed = 0.125
		semiDeploymentSpeed = 0.5
		chutebreakingTorque = 500
		breakingForce = 500
		maxTemp = 650	
	}
	
	MODULE:NEEDS[RealChute]
	{
		name = RealChuteModule
		caseMass = 0.014	//70 kg - 56 kg RealChute mass = 14 kg
		mustGoDown = False
		spareChutes = 0
		cutSpeed = 0.5
		reverseOrientation = True

		PARACHUTE
		{
			parachuteName = canopy
			capName = cover
			preDeploymentAnimation = tantares_v2_parachute_s0_1_semi
			deploymentAnimation = tantares_v2_parachute_s0_1_full
			material = Nylon
			minIsPressure = False
			minPressure = 0.01
			preDeployedDiameter = 15
			preDeploymentSpeed = 2.5
			minDeployment = 3660
			deployedDiameter = 35.68
			deploymentSpeed = 4.0
			deploymentAlt = 3350
			cutAlt = 0
		}
	}

	MODULE
	{
		name = ModuleDecouple
		isOmniDecoupler = false
		ejectionForce = 250
	}

	MODULE
	{
		name = ModuleDragModifier
		dragCubeName = SEMIDEPLOYED
		dragModifier = 6 //1.25
	}
	MODULE
	{
		name = ModuleDragModifier
		dragCubeName = DEPLOYED
		dragModifier = 10.7 //25
	}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = b9_colour
		switcherDescription = Colour

		SUBTYPE
		{
			name = c_black
			title = Black
			primaryColor = Black
			TEXTURE
			{
				texture = ROCapsules/Assets/Tantares/core_soyuz_v2/a1
				currentTexture = a1
			}
		}
		SUBTYPE
		{
			name = c_green
			title = Green
			primaryColor = Green
			TEXTURE
			{
				texture = ROCapsules/Assets/Tantares/core_soyuz_v2/a1_green
				currentTexture = a1
			}
		}
		SUBTYPE
		{
			name = c_tan
			title = Tan
			primaryColor = Tan
			TEXTURE
			{
				texture = ROCapsules/Assets/Tantares/core_soyuz_v2/a1_cream
				currentTexture = a1
			}
		}
	}
	MODULE
	{
		name = ModuleRCSFX
		thrusterTransformName = RCSthruster
		thrusterPower = 0.0735	//7.5 kgf thrust
		runningEffectName = running
		fullThrust = True
		stagingEnabled = True
		stagingToggleEnabledEditor = True
		rcsEnabled = False
		PROPELLANT
		{
			ratio = 1.0
			name = HTP
		}
		PROPELLANT
		{
			name = Helium
			ratio = 15.2
			ignoreForIsp = true
		}
		atmosphereCurve
		{
			key = 0 137
			key = 1 57
		}
	}

	//	============================================================================
	//	Animations and Textures
	//	============================================================================
	
	EFFECTS
	{
		running
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.02 0.02
				volume = 0.5 0.2
				volume = 1.0 0.2
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = RCSthruster
				emisison = 0.0 0.0
				emisison = 0.1 0.0
				emisison = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90,0,0
			}
		}
		rcpredeploy
		{
			AUDIO
			{
				channel = Ship
				clip = sound_parachute_open
				volume = 1
			}
		}

		rcdeploy
		{
			AUDIO
			{
				channel = Ship
				clip = sound_parachute_single
				volume = 1
			}
		}

		rccut
		{
			AUDIO
			{
				channel = Ship
				clip = RealChute/Sounds/sound_parachute_cut
				volume = 1
			}
		}

		rcrepack
		{
			AUDIO
			{
				channel = Ship
				clip = RealChute/Sounds/sound_parachute_repack
				volume = 1
			}
		}
	}
}