PART
{
	module = Part
	name = ROC-ApolloCMBDB
	author = CobaltWolf, capkirk

	RSSROConfig = true

	//	================================================================================
	//Source for all Apollo Masses: http://www.alternatewars.com/BBOW/Space/JSC-26098_Design_Mass_Properties_II.pdf
	//	================================================================================
	//Apollo Command Module Dry Mass Breakdowns:
	//	================================================================================
	//Docking Mechanism Probe: 247.5 lbs
	//	Other: 247.5 lbs
	//		Docking Provisions: 247.5 lbs
	//	================================================================================
	//Forward Heat Shield: 574.7 lbs
	//	Structure: 244.8 lbs
	//		Honeycomb Panels: 60.4 lbs
	//		Longerons: 2.4 lbs
	//		Frames and Rings: 64.7 lbs
	//		Windows, Hatches, Acc: 0.9 lbs
	//		Mechanisms: 33.3 lbs
	//		Body to Heat Shield Attach: 0.5 lbs
	//		Fittings and Attach Parts: 82.6 lbs
	//	TPS: 329.9 lbs
	//		Honeycomb Panels: 67.7 lbs
	//		Frames and Rings: 27.9 lbs
	//		Access Doors: 0.1 lbs
	//		Fittings and Attach Parts: 42.6 lbs
	//		Windows and Hatch Covers: 37.9 lbs
	//		Closeouts: 0.8 lbs
		//		Forward Section Ablator: 135.3 lbs
	//		Forward Section Insulation: 17.6 lbs
	//	================================================================================
	//Drogue Parachute Pack: 126.7 lbs
	//	Other: 126.7 lbs
	//		Drogue Chute System: 97.8 lbs
	//		Pilot Chute System: 28.9 lbs
	//	================================================================================
	//Main Parachute Pack: 432.0 lbs
	//	Other: 432.0 lbs
	//		Main Chute Cluster: 432.0 lbs
	//	================================================================================
	//CM: 8503.0 lbs lbs
	//	Structure: 1368.0 lbs
	//		Honeycomb Panels: 259.1 lbs
	//		Longerons: 112.4 lbs
	//		Frames and Rings: 150.2 lbs
	//		Windows, Hatches, Acc: 96.3 lbs
	//		Body to Heat Shield Attach: 54.2 lbs
	//		Fittings and Attach Parts: 63.0 lbs
	//		RH Equipment Bay: 130.9 lbs
	//		LH Equipment Bay: 131.6 lbs
	//		Forward LH Equipment Bay: 25.1 lbs
	//		Forward RH Equipment Bay: 41.9 lbs
	//		Main Display Panel: 37.4 lbs
	//		Lower Equipment Bay: 184.7 lbs
	//		Forward Compartment Area: 5.0 lbs
	//		Aft Equipment Bay: 22.5 lbs
	//		Aft Compt Area Wire Supports: 7.9 lbs
	//		Aft Compt Area Equip Supports: 39.0
	//		ALEM Structure Provisions Delt: 6.8 lbs
	//	TPS: 1621.9 lbs		(797.7 lbs HS mass moved to CM mass so HS mass agrees with autoconfig mass)
	//	TPS Corrected: 2419.6 lbs
	//		Honeycomb Panels: 243.8 lbs
	//		Frames and Rings: 124.1 lbs
	//		Access Doors: 340.6 lbs
	//		Body Structure to HS Attach: 120.7 lbs
	//		Fittings and Attach Parts: 97.8 lbs
	//		Windows and Hatch Covers: 64.8 lbs
	//		Mechanisms: 91.0 lbs
	//		Closeouts: 20.9 lbs
	//		Air Vent: 27.7 lbs
		//		Center Section Ablator: 407.5 lbs
	//		Center Section Insultation: 83.0 lbs
	//	Propulsion: 294.8 lbs
	//		Tanks and Expulsion Fuel: 13.4 lbs
	//		Plumbing and Fittings Fuel: 19.6 lbs
	//		Valves and Regulators Fuel: 10.5 lbs
	//		Supports Fuel: 5.6 lbs
	//		Tanks and Expulsion Oxid: 14.8 lbs
	//		Plumbing and Fittings Oxid: 20.0 lbs
	//		Valves and Regulators Oxid: 10.5 lbs
	//		Supports Oxid: 7.7 lbs
	//		Tanks Press: 10.2 lbs
	//		Plumbing and Fittings Press: 7.5 lbs
	//		Valves and Regulators Press: 22.4 lbs
	//		Supports Press: 7.1 lbs
	//		Engines: 97.2 lbs
	//		Engine Supports: 1.3 lbs
	//		Engine Nozzle Inserts: 47.0 lbs
	//	Power: 1413.7 lbs
	//		Battery - Entry Energy Source: 56.6 lbs
	//		Battery - Post Land Energy Source: 28.3 lbs
	//		Battery - Pyrotech Energy Source: 5.2 lbs
	//		Plumbing - Energy Source: 1.6 lbs
	//		Equipment Supports: 1.0 lbs
	//		Inverters - Power Conversion: 157.5 lbs
	//		Battery Charger - Power Conversion: 4.6 lbs
	//		DC Power Panel: 8.6 lbs
	//		AC Power Box: 10.0 lbs
	//		Battery Circuit Breaker Panel: 4.7 lbs
	//		Electrical Power Circ Brk Pnl: 3.2 lbs
	//		Uprighting System: 9.5 lbs
	//		Terminal Distrubution Panels: 18.6 lbs
	//		Supports and Installation Prov: 1.5 lbs
	//		Electrical Harness Inst: 729.7 lbs
	//		Lower Equip Bay Motor Switches: 6.8 lbs
	//		Circuit Interruptors: 30.5 lbs
	//		RCS Controller: 26.4 lbs
	//		Supports and Installation Prov: 131.1 lbs
	//		Junction Box Assembly: 7.8 lbs
	//		Master Event Sequence Control: 113.4 lbs
	//		Pyro Continuity Box: 10.8 lbs
	//		Supports and Hardware: 3.5 lbs
	//		Controller - Post Land Vent: 3.5 lbs
	//		ALEM EPS Delta: 39.3 lbs
	//	Avionics: 933.8 lbs
	//		Stabilization & Control: 201.8 lbs
	//		Instrumentation: 36.8 lbs
	//		Communications: 302.3 lbs
	//		GN&C: 392.9 lbs
	//	Enviroment: 1749.9 lbs
	//		Displays: 54.9 lbs
	//		Crew Systems: 448.0 lbs
	//		Environ Control Sys: 573.1 lbs
	//		Mechanical Subsystem: 289.7 lbs
	//		Controls: 363.0 lbs
	//		Lighting: 21.2 lbs
	//	Other: 323.2 lbs
	//		Manufacturing Variations: -130.0 lbs
	//		EVA Hand Holds: 27.1 lbs
	//		Pyrotechnics: 11.0 lbs
	//		CM - LES Attach: 3.7 lbs
	//		CM - SM Attach: 17.1 lbs
	//		Pyrotechnic Initiators: 3.3 lbs
	//		Crushable Ribs: 45.8 lbs
	//		Crew Couch Attenuation: 110.9 lbs
	//		Single Point Flotation System: 62.6 lbs
	//		Sea Pick-up Hook: 15.0 lbs
	//		Parachute Attach Fittings: 31.6 lbs
	//		Recovery Aids: 4.3 lbs
	//		Disconnect Main Cluster: 30.0 lbs
	//		Parachute Sequence Control: 0.7 lbs
	//		Parachute Attach Provisions: 5.2 lbs
	//		Dye Marker: 1.9 lbs
	//		Flashing Light and Component: 4.2 lbs
	//		HS Ejector: 36.8 lbs
	//		HS Plumbing: 5.1 lbs
	//		HS Breech: 18.6 lbs
	//		HS Attach Provisions: 18.3 lbs
	//	================================================================================
	//HS: 1350.7 lbs
	//	Structure: 206.6 lbs
	//		Honeycomb Panels: 126.0 lbs
	//		Frames and Rings: 77.9 lbs
	//		Body to Heat Shield Attach: 2.6 lbs
	//		Fittings and Attach Parts: 0.1 lbs
	//	TPS: 1779.2 lbs		(Moving 797.7 lbs to CM mass so HS mass agrees with autoconfig mass)
	//	TPS Corrected: 981.5 lbs
	//		Honeycomb Panels: 556.6 lbs
	//		Frames and Rings: 55.8 lbs
	//		Body Structure to HS Attach: 50.4 lbs
	//		Fittings and Attach Parts: 66.0 lbs
	//		Windows and Hatch Covers: 0.3 lbs
	//		Closeouts: 7.1 lbs
	//		Toroidal Assembly: 50.6 lbs
		//		Aft Section Ablator: 929.6 lbs
	//		Aft Section Insulation: 62.8 lbs
	//	Other: 162.6 lbs
	//		Aft H/S - C/M Ballast: 162.6 lbs
	//	================================================================================
	//TOTAL DRY MASS: 11234.6 lbs
	//	Structure: 1819.4 lbs
	//	TPS: 3731 lbs
	//	Propulsion: 294.8 lbs
	//	Power: 1413.7 lbs
	//	Avionics: 933.8 lbs
	//	Environmental: 1749.9 lbs
	//	Other: 1292 lbs

	//	================================================================================
	//Apollo Command Module Inert Mass Breakdowns:
	//	================================================================================
	//CM: 184.9 lbs (+ 504.0 lbs crew, 463.9 lbs equipment, 100 lbs LiOH, 305 lbs cargo, 1 lbs Helium. 1558.8 lbs all included)
	//	Non-Cargo: 184.9 lbs
	//		Crew: 504.0 lbs (not incl.)
	//		Crew Equipment: 463.9 lbs (not incl.)
	//		Miscellaneous Equipment: 10.9 lbs
	//		ALEM Crew Equip: 68.9 lbs
	//		RCS Residuals: 36.4 lbs (- 1 lbs Helium)
	//		ECS Residuals: 68.7 lbs (168.7 - 100 lbs LiOH)
	//	Cargo: 0.0 lbs
	//		Returned Cargo: 305.0 lbs (not incl.)
	//INERT MASS: 184.9 lbs

	//TOTAL INERT MASS: 11419.5 lbs (12793.4 lbs all included)

	//	================================================================================
	//Apollo Command Module Wet Mass Breakdowns:
	//	================================================================================
	//CM: 363.6 lbs
	//	Non-Propellant: 154.0 lbs
	//		Water (Useable): 54.0 lbs
	//		LiOH Canisters: 100.0 lbs
	//	Propellant: 209.6 lbs
	//		RCS Fuel: 75.1 lbs
	//		RCS Oxidizer: 133.5 lbs
	//		Helium - Pressurization: 1.0 lbs

	//GROSS MASS: 11783.1 lbs
	//ALL INCLUDED GROSS MASS: 13057 lbs

	//	================================================================================
	//Kerbonaut weight: 220 lbs (close enough)
	//Remaining mass of equipment spread among kerbalism experiments, life support supplies
	//	================================================================================

	//	================================================================================
	//Ultimate Part Mass Assignments:
	//	================================================================================
	//	Docking Mechanism Probe: 247.5 lbs (112.26 kg)
	//		Dry Mass: 247.5 lbs
	//	================================================================================
	//	Forward Heat Shield: 574.7 lbs (260.68 kg)
	//		Dry Mass: 574.4 lbs
	//	================================================================================
	//	Drogue Parachute Pack: 126.7 lbs (57.47 kg)
	//		Dry Mass: 126.7 lbs
	//	================================================================================
	//	Main Parachute Pack: 432.0 lbs (195.95 kg)
	//		Dry Mass: 432.0 lbs
	//	================================================================================
	//	CM: 8687.9 lbs (3940.77 kg), 8841.9 lbs (4010.62) compensated for LS mass
	//		Dry Mass: 8503.0 lbs
	//		Inert Mass: 185.9 lbs
	//		LS Compensation Mass: 154.0 lbs
	//	================================================================================
	//	HS: 1350.7 lbs (612.67 kg)
	//		Dry Mass: 1350.7 lbs
	//	================================================================================
	//INERT MASS: 11420.5 lbs (5180.25 kg)

	//	================================================================================
	//Ultimate Part Resource Assignments:
	//	================================================================================
	//CM:
	//	CM Propellant: 93.16 L
	//		Helium: 2540 L (/200)
	//		NTO: 41.76 L
	//		MMH: 38.70 L
	//	CM LS: 349.41 L
	//			Water (Cooling): 22.04 L	(This might become it's own resource one day. Ignore for now, not included in wet mass)
	//		Water (Crew): 24.49 L
	//		Oxygen (Crew): 150 L (/200)		(No actual oxygen storage in CM. Crew relied on residual oxygen in surge tank for landing)
	//		Food: 245.7 L (this isn't actually specified, presumably included under supplies. Just use what we had before)
	//		LiOH: 31.07 L
	//		Waste: 22.4 L
	//		WasteWater: 25.0 L
	//	CM EC: 21390 EC (1,000 EC/L)
	//		EC: 21.39 L
	//	CM Excess: 200 L (???)
	//	LS Resources Mass (including food): 139.50 kg
	//	LS Resources Mass (excluding food): 70.06 kg
	//TOTAL TANK SIZE (NO LS): 314.55 L
	//TOTAL TANK SIZE (W/ LS): 663.96 L

	//	================================================================================
	//Tank Mass Compensation
	//	================================================================================
	//	CM Propellant Tank (SM-IV): 8.95 kg
	//	CM LS Tank (SM-IV): 33.8 kg
	//	CM Batteries (SM-IV): 30.80 kg

	//	============================================================================
	//	Model and Dimensions
	//	============================================================================

	MODEL
	{
		model = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CrewPod
	}

	scale = 1.0
	rescaleFactor = 1.5646

	NODE
	{
		transform = drogueChute_NODE
		name = parachute
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		transform = mainChute_NODE
		name = parachute
		size = 0
		method = FIXED_JOINT
	}

	node_stack_bottom = 0.0, -0.59527, 0.0, 0.0, -1.0, 0.0, 2
	node_stack_top = 0.0, 0.74178, 0.0, 0.0, 1.0, 0.0, 1
	//node_stack_top2 = 0.0, 0.33921, 0.0, 0.0, 1.0, 0.0, 1
	// stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	//CenterOfBuoyancy = 0.0, 0.8, 0.0
	//CenterOfDisplacement = 0.0, -0.3, 0.0
	//buoyancyUseSine = False
	//buoyancy = 1.1
	
	//	============================================================================
	//	Title, Description, Category, Techs
	//	============================================================================
	
	title = #rocApolloCMBDBTitle //Apollo Command Module (CM)
	manufacturer = #roMfrNARockwell //North American Rockwell
	description = #rocApolloCMBDBDesc //The Command Module of the Apollo spacecraft. Apollo was the spacecraft that transported humans to the Moon in the 1960's and 1970's. It has room for three crew.
	
	mass = 3.77824		//3940.77 kg - 184.84 kg (Ablator) - 8.95 kg (RCS Tanks) - 30.80 kg (Battery) + 70.06 kg (Water, LiOH. Food included in Inert mass) - 8 kg (Habitat Atmosphere) = 3778.24 kg
	CoMOffset = 0.0, -0.54, 0.0		//CoG position from base = diameter / 0.270 = 1.05 m
	
	category = Pods
	subcategory = 0
	
	tags = apollo, moon, lunar, crew, armstrong, aldrin, cm, csm, saturn, v
	
	TechRequired = unlockParts
	cost = 1
	entryCost = 1
	
	vesselType = Ship
	stagingIcon = COMMAND_POD
	CrewCapacity = 3
	
	INTERNAL
	{
		name = ApolloCM_Internal
	}
	
	//	============================================================================
	//	Thermo, Durability
	//	============================================================================
	
	//Thermal Stuff
	//Skin made of Stainless steel, coated with ablative layer of varying thickness, and Klapton insulation
	//Peak temp on HS: ~3000 K
	//Peak temp on Walls: ~2000 K
	//Peak temp on forward surfaces: ~1100 K
	maxTemp = 448
	skinMaxTemp = 2000					//Ablative coating wrapped around sides of Apollo to account for extreme flux.
	emissiveConstant = 0.4				//Metallicized Klapton coating.
	heatConductivity = 1.0				//All conductivity. Leave this alone for now
	thermalMassModifier = 1.0			//Thermal mass. Leave this alone for now
	skinInternalConductionMult = 0.005	//Skin-to-int conductivity. Skin coated in ablator, and isolated from Aluminum hull with very thick insulation layer.
	skinMassPerArea = 7.9				//1 mm thick stainless, 7.9 kg/m^2?
	skinThermalMassModifier = 1.0		//Skin thermal mass. Leave this alone for now
	skinSkinConductionMult = 0.05		//Skin well insulated and connected with slip-joints. Probably not much conduction.
	
	crashTolerance = 8
	breakingForce = 250
	breakingTorque = 250
	
	fuelCrossFeed = true
	
	//	============================================================================
	//	Modules and Resources
	//	============================================================================
	
	//Same structure as main HS
	//Tweak HS settings slightly to get more agressive ablation. Control temps better and consume more ablator
	//This actually survives LEO reentry on it's own. Probably not ideal
	MODULE
	{
		name = ModuleAblator
		ablativeResource = Ablator
		outputResource = CharredAblator
		outputMult = 0.8
		lossExp = -20000
		lossConst = 150
		pyrolysisLossFactor = 145833
		ablationTempThresh = 1250
		reentryConductivity = 0.0025
		infoTemp = 3000
	}
	RESOURCE
	{
		name = Ablator
		maxAmount = 184.84	//407.5 lbs
		amount = 184.84
	}
	RESOURCE
	{
		name = CharredAblator
		maxAmount = 147.87
		amount = 0
	}
	
	MODULE
	{
		name = ModuleCommand
		minimumCrew = 0
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.52
		}
	}
	
	MODULE
	{
		name = ModuleSAS
		SASServiceLevel = 3
	}

	MODULE
	{
		name = AdjustableCoMShifter
		DescentModeCoM = 0, 0, 0.196	//Apollo should reenter "windows-down" to protect crew hatch
										//Maximum CoG offset 0.050 * diameter? Source: https://ntrs.nasa.gov/citations/19690020179
	}

	MODULE
	{
		name = ModuleScienceContainer
		reviewActionName = Review Stored Data
		storeActionName = Store Experiments
		storageRange = 2.0
	}

	//	============================================================================
	//	Internals
	//	============================================================================
	MODULE:NEEDS[RasterPropMonitor]
	{
		name = RasterPropMonitorComputer
		RPM_COLOROVERRIDE
		{			
			// NASA gauge ----------------------------------------------
			COLORDEFINITION
			{
				name = ASET_NASAGAUGESCALE_ACTIVECOLOR
				color= 144,139,118,255
			}
			COLORDEFINITION
			{
				name = ASET_NASAGAUGEHAND_ACTIVECOLOR
				color= 184,179,148,255
			}
			
			// ASET aircraft instruments -----------------------------
			// round gauge backlight
			COLORDEFINITION
			{
				name = ASET_AIRCRAFTGAUGESCALE_ACTIVECOLOR //light on
				color = 144,139,118,255
			}
		   
			COLORDEFINITION
			{
				name = ASET_AIRCRAFTGAUGEHAND_ACTIVECOLOR //light on
				color =184,179,148,255
			}
			
			// switchers -------------------------------------------------
			COLORDEFINITION
			{
				name = ASET_SWITCHER_NAME_POSITIVECOLOR
				color= 184,179,158,255
			}
			COLORDEFINITION
			{
				name = ASET_SWITCHER_STATE_POSITIVECOLOR
				color= 154,149,118,255
			}
			COLORDEFINITION
			{
				name = ASET_SWITCHER_BORDER_POSITIVECOLOR
				color= 134,129,98,255
			}
			COLORDEFINITION
			{
				name = ASET_SWITCHER_MARK_POSITIVECOLOR
				color= 194,189,158,255
			}
			
			// LEDs off
			COLORDEFINITION
			{
				name = ASET_SWITCHER_LEDS_POSITIVECOLOR
				color= 0,0,0,255
			}
			COLORDEFINITION
			{
				name = ASET_SWITCHER_LEDS_ZEROCOLOR
				color= 0,0,0,255
			}
			
			// Numeric Input display ---------------------------------------
			// background			
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_DIFFUSE_ACTIVECOLOR
				color= 0,0,0,255
			}
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_DIFFUSE_PASSIVECOLOR
				color= 0,40,0,255
			}
			
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_EMISSIVE_ACTIVECOLOR
				color= 0,40,0,255
			}
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_EMISSIVE_PASSIVECOLOR
				color= 0,0,0,255
			}
			// readout
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_POSITIVECOLOR
				color= 0,255,0,255
			}
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_ZEROCOLOR
				color= 0,55,0,255
			}
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_NEGATIVECOLOR 
				color= 0,0,0,255
			}
			COLORDEFINITION
			{
				name = ASET_NUMINPUT_DISPLAY_GHOSTCOLOR
				color= 0,255,0,90
			}
			
			// digital indicator --------------------------------
			// readout
			COLORDEFINITION
			{
				name = ASET_DIGITALINDICATOR_NORMAL_COLOR
				color= 0,255,0,255
			}
			COLORDEFINITION
			{
				name = ASET_DIGITALINDICATOR_WARNING_COLOR
				color= 0,255,0,255
			}
			COLORDEFINITION
			{
				name = ASET_DIGITALINDICATOR_STBY_COLOR
				color= 0,255,0,120
			}			
			// legend
			COLORDEFINITION
			{
				name = ASET_DIGITALINDICATOR_LEGEND_NORMAL_COLOR
				color= 0,255,0,255
			}
			COLORDEFINITION
			{
				name = ASET_DIGITALINDICATOR_LEGEND_STBY_COLOR
				color= 0,255,0,120
			}
			
			// label plate ---------------------------------------------
			// background
			COLORDEFINITION
			{
				name = ASET_PLATEBKG_DIFFUSE_PASSIVECOLOR
				color= 80,80,80,255
			}
			COLORDEFINITION
			{
				name = ASET_PLATEBKG_DIFFUSE_ACTIVECOLOR
				color= 80,80,80,255
			}
			
			COLORDEFINITION
			{
				name = ASET_PLATEBKG_EMISSIVE_PASSIVECOLOR
				color= 0,0,0,255
			}
			COLORDEFINITION
			{
				name = ASET_PLATEBKG_EMISSIVE_ACTIVECOLOR
				color= 0,0,0,255
			}
			// label text
			COLORDEFINITION
			{
				name = ASET_PLATETEXT_POSITIVECOLOR
				color= 174,169,138,255
			}
			COLORDEFINITION
			{
				name = ASET_PLATETEXT_ZEROCOLOR
				color= 255,255,255,255
			}
		}
	}
	
	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = False
		thrusterTransformName = rcsTransform
		thrusterPower = 0.411
		runningEffectName = running
		rcsEnabled = False
		enableX = false
		enableY = false
		enableZ = false
		enableRoll = true
		enablePitch = true
		enableYaw = true

		PROPELLANT
		{
			name = MMH
			ratio = 0.4810
		}

		PROPELLANT
		{
			name = NTO
			ratio = 0.5190
		}

		PROPELLANT
		{
			name = Helium
			ratio = 15.0
			ignoreForIsp = True
		}

		atmosphereCurve
		{
			key = 0 274
			key = 1 137
			key = 4 0.001
		}
	}
	
	MODULE:NEEDS[ConnectedLivingSpace]
	{
		name = ModuleConnectedLivingSpace
		passable = true
		impassablenodes = drogueChute_NODE, mainChute_NODE
	}
	
	MODULE
	{
		name = ModuleFuelTanks
		type = SM-IV
		volume = 314.55
		basemass = 3.77824

		//	Three batteries ~3.36 kWh (28 V @ 40 Ah each).
		//	Support the Command Module for the duration of it's free
		//	flight before and after reentry (approximately 2 hours).
		//	Adding batteries based on mass instead (including squib batteries, landing aids, etc.)
		TANK
		{
			name = ElectricCharge
			amount = 21390
			maxAmount = 21390
		}

		//75.1 lbs useable
		TANK
		{
			name = MMH
			amount = 38.70
			maxAmount = 38.70
		}

		//133.5 lbs useable
		TANK
		{
			name = NTO
			amount = 41.76
			maxAmount = 41.76
		}

		//1 lbs
		TANK
		{
			name = Helium
			amount = 2540
			maxAmount = 2540
		}
	}
	
	//	============================================================================
	//	Comms
	//	============================================================================
	
	MODULE:NEEDS[!RemoteTech]
	{
		name = ModuleDataTransmitter
		antennaType = DIRECT
		antennaPower = 64
		antennaCombinable = True
		antennaCombinableExponent = 2.0
		packetInterval = 1.0
		packetSize = 2.0
		requiredResource = ElectricCharge
		packetResourceCost = 0.04
		DeployFxModules = 0
	}
	
	MODULE:NEEDS[RemoteTech]
	{
		name = ModuleSPU
		IsRTCommandStation = False
		RTCommandMinCrew = 0
	}
	
	MODULE:NEEDS[RemoteTech]
	{
		name = ModuleRTAntenna
		ActionMode0Name = Deactivate Internal Antenna
		ActionMode1Name = Activate Internal Antenna
		IsRTActive = False
		Mode0OmniRange = 0
		Mode1OmniRange = 400000
		EnergyCost = 0.02
		DeployFxModules = 0

		TRANSMITTER
		{
			PacketInterval = 1.0
			PacketSize = 0.512
			PacketResourceCost = 0.02
		}
	}
	
	//	============================================================================
	//	Animations and Textures
	//	============================================================================
	MODULE
	{
		name = ModuleColorChanger
		shaderProperty = _EmissiveColor
		animRate = 0.8
		animState = false
		useRate = true
		toggleInEditor = true
		toggleInFlight = true
		toggleInFlight = true
		unfocusedRange = 5
		toggleName = #roLightToggle
		eventOnName = #roLightOn
		eventOffName = #roLightOff
		toggleAction = True
		defaultActionGroup = Light
		redCurve
		{
			key = 0 0 0 3
			key = 1 1 0 0
		}
		greenCurve
		{
			key = 0 0 0 1
			key = 1 1 1 0
		}
		blueCurve
		{
			key = 0 0 0 0
			key = 1 0.7 1.5 0
		}
		alphaCurve
		{
			key = 0 1
		}
	}
	
	// MODULE
	// {
		// name = ModuleB9PartSwitch
		// moduleID = textureSwitchPaint
		// switcherDescription = Paintjob
		// affectDragCubes = False
		// affectFARVoxels = False
		// SUBTYPE
		// {
			// name = Default
			// transform = colorswitch
		// }
		// SUBTYPE
		// {
			// name = Boilerplate
			// transform = colorswitch_bp
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/White/bluedog_Apollo_CM_White
				// transform = whiteMat
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/BP/bluedog_Apollo_CM_BP
				// transform = bpMat
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CM_Painted_NRM
				// isNormalMap = true
				// transform = whiteMat
				// transform = bpMat
			// }
		// }
		// SUBTYPE
		// {
			// name = Modern
			// transform = Painted
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/Modern/bluedog_Apollo_CM_Modern
				// transform = Painted
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/Modern/bluedog_Apollo_CM_Modern_NRM
				// isNormalMap = true
				// transform = Painted
			// }
		// }
		// SUBTYPE
		// {
			// name = Toasted
			// transform = Painted
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/Skylab/bluedog_Apollo_CM_Skylab
				// transform = Painted
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CM_Painted_NRM
				// isNormalMap = true
				// transform = Painted
			// }
		// }
		// SUBTYPE
		// {
			// name = Skylab (Toasted)
			// transform = colorswitch_skylab
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/Skylab/bluedog_Apollo_CM_Skylab
				// transform = skylabMat
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CM_Painted_NRM
				// isNormalMap = true
				// transform = skylabMat
			// }
		// }
		// SUBTYPE
		// {
			// name = White
			// transform = Painted
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/White/bluedog_Apollo_CM_White
				// transform = Painted
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CM_Painted_NRM
				// isNormalMap = true
				// transform = Painted
			// }
		// }
		// SUBTYPE
		// {
			// name = Skylab (Clean)
			// transform = colorswitch_skylab
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/Paint/White/bluedog_Apollo_CM_White
				// transform = skylabMat
			// }
			// TEXTURE
			// {
				// texture = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_CM_Painted_NRM
				// isNormalMap = true
				// transform = skylabMat
			// }
		// }
	// }
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = textureSwitchHandles
		switcherDescription = Handles
		affectDragCubes = False
		affectFARVoxels = False
		SUBTYPE
		{
			name = Default
		}
		SUBTYPE
		{
			name = Blue
			TEXTURE
			{
				texture = ROCapsules/Assets/BDB/Apollo/Paint/White/bluedog_Apollo_CM_White
				transform = Handles
			}
		}
		SUBTYPE
		{
			name = Gold
			TEXTURE
			{
				texture = ROCapsules/Assets/BDB/Apollo/Paint/Skylab/bluedog_Apollo_CM_Skylab
				transform = Handles
			}
		}
	}
	
	EFFECTS
	{
		running
		{
			AUDIO_MULTI
			{
				channel = Ship
				transformName = rcsTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.1 0.0
				volume = 0.5 0.025
				volume = 1.0 0.1
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = rcsTransform
				emission = 0.0 0.0
				emission = 0.1 0.0
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				localRotation = -90, 0, 0
			}
		}
	}
}

//	================================================================================
//	TAC Life Support Compatibility
//	================================================================================

@PART[ROC-ApolloCMBDB]:FOR[RealismOverhaulTACLS]:NEEDS[TacLifeSupport]
{
	@description ^= :$: Supports a crew of three for up to 14 days of active operations.

	@mass -= 0.1733		//- 33.8 kg for LS tank, - 139.50 kg for LS supplies

	@MODULE[ModuleFuelTanks]
	{
		@volume += 349.41
		@basemass -= 0.19541
		TANK
		{
			name = Food
			amount = 245.7
			maxAmount = 245.7
		}

		TANK
		{
			name = Water
			amount = 24.49
			maxAmount = 24.49
		}

		TANK
		{
			name = Oxygen
			amount = 150
			maxAmount = 150
		}

		TANK
		{
			name = LithiumHydroxide
			amount = 31.07
			maxAmount = 31.07
		}

		//	One waste water tank with a capacity of ~25 kg.
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 25
		}

		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 22.4
		}

		TANK
		{
			name = CarbonDioxide
			amount = 0
			maxAmount = 150
		}
	}

	MODULE
	{
		name = TacGenericConverter
		converterName = CO2 LiOH Scrubber
		tag = Life Support
		StartActionName = Start CO2 Scrubber
		StopActionName = Stop CO2 Scrubber
		conversionRate = 3.0
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = CarbonDioxide
			Ratio = 0.006216
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.1
		}

		INPUT_RESOURCE
		{
			ResourceName = LithiumHydroxide
			Ratio = 0.00001189
			FlowMode = STAGE_PRIORITY_FLOW
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Waste
			Ratio = 0.00003932
			DumpExcess = False
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}
}

//	================================================================================
//	Final Pass to Make Sure TAC does not add extra resources
//	================================================================================

@PART[ROC-ApolloCMBDB]:LAST[ROCapsules]
{
	!RESOURCE:HAS[~name[Ablator],~name[CharredAblator]],*{}
}

//	================================================================================
//	Override RO global settings to get our temperatures back
//	================================================================================
@PART[ROC-ApolloCMBDB]:AFTER[RealismOverhaul_Materials]
{
	@maxTemp = 448
	@skinMaxTemp = 2000		//Keep this lower to "discourage" attempting reentry without HS
}

//	================================================================================
//	Offset RA antenna mass
//	================================================================================
@PART[ROC-ApolloCMBDB]:AFTER[RealAntennas]
{
	@mass -= 0.0217	//Subtract 21.7 kg for a 30 dbm TL 5 antenna
	
	@MODULE[ModuleFuelTanks]
	{
		@basemass -= 0.0217
	}
}
