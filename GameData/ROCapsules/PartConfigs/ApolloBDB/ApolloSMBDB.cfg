PART
{
	module = Part
	name = ROC-ApolloSMB2BDB
	author = CobaltWolf, capkirk123

	RSSROConfig = true

	//	================================================================================
	//Source for all Apollo Masses: http://www.alternatewars.com/BBOW/Space/JSC-26098_Design_Mass_Properties_II.pdf
	//	================================================================================
	//Apollo Command Module Dry Mass Breakdowns:
	//	================================================================================
	//Apollo Decoupler: 177.8 lbs
	//	Structure: 144.9 lbs
	//		C/M-S/M Umbilical Provisions: 16.7 lbs
	//		Flyaway & Carry On Umbilical Prov: 6.7 lbs
	//		Honeycomb Panels - Shell: 71.7 lbs
	//		Umbilical Fairing: 0.7 lbs
	//		Splices: 8.1 lbs
	//		Fiberglass Sandwich & C/M Close: 33.4 lbs
	//		Fittings & Attach Parts: 7.6 lbs
	//	TPS: 14.4 lbs
	//		Fairing Insulation: 14.4 lbs
	//	Other: 18.5 lbs
	//		C/M-S/M Tension Tie: 18.5 lbs
	//	================================================================================
	//Apollo Docking Light: 10.9 lbs
	//	Power: 10.9 lbs
	//		Lighting: 10.9 lbs (half to docking light, half to EVA light)
	//	================================================================================
	//Apollo Engine Mount: 593.8 lbs
	//	Structure: 401.6 lbs
	//		Aft Bulkhead: 309.8 lbs
	//		SPS Engine Support Structure: 60.2 lbs
	//		Communications Mounting Prov: 2.5 lbs
	//		Hi Gain Antenna Supports: 29.1 lbs
	//	TPS: 192.2 lbs
	//		Aft Heat Shield: 84.1 lbs
	//		Aft Heat Shield Insulation: 108.1 lbs
	//	================================================================================
	//Apollo EVA Light: 10.8 lbs
	//	Power: 10.8 lbs
	//		Lighting: 10.8 lbs (21.7 lbs total. half to docking light, half to EVA light)
	//	================================================================================
	//Apollo HGA: 98.1 lbs
	//	Avionics: 98.1 lbs
	//		2KMC High Gain Ant Trans Lines: 4.2 lbs
	//		High Gain Antenna: 93.9 lbs
	//	================================================================================
	//Apollo RCS: 31.5 lbs (x4)
	//	Structure: 10.9 lbs
	//		RCS Engine Supports: 10.9 lbs (43.6 lbs total. Divide by four)
	//	Propulsion: 20.6 lbs
	//		Engines: 20.6 lbs (82.4 lbs total. Divide by four)
	//	================================================================================
	//Apollo Scimitar Antenna: 17.4 lbs (x2)
	//	Avionics: 17.4 lbs
	//		VHF Omni Ant Trans Lines: 17.4 lbs (34.7 lbs total. Divide by two for two antennas)
	//	================================================================================
	//Apollo SPS: 821.1 lbs
	//	Propulsion: 821.1 lbs
	//		Engines: 821.1 lbs
	//	================================================================================
	//Apollo Service Module: 8733.4 lbs
	//	Structure: 2636.4 lbs
	//		Honeycomb Panels: 391.7 lbs
	//		Windows, Hatches, Acc Doors, Frame: 6.8 lbs
	//		Fittings and Attach Parts: 64.2 lbs
	//		Radial Beams: 364.0 lbs
	//		Internal Partitions: 7.6 lbs
	//		Forward Bulkhead: 127.2 lbs
	//		RCS Panels: 272.5 lbs
	//		Hydrogen Tank Supports and Shelf: 16.8 lbs
	//		Oxygen Tank Supports and Shelf: 32.9 lbs
	//		Fuel Cell Supports and Shelf: 36.9 lbs
	//		EPS Mounting Provisions: 103.3 lbs
	//		ECS Mounting Provisions: 14.8 lbs
	//		Instrumentation Mounting Prov: 6.2 lbs
	//		R/R Antenna & Equipment Supports: 1.4 lbs
	//		SPS Fuel System Supports: 11.2 lbs
	//		SPS Oxidizer System Supports: 14.7 lbs
	//		SPS Pressure System Supports: 10.0 lbs
	//		RCS Fuel System Supports: 49.6 lbs
	//		RCS Oxidizer System Supports: 51.4 lbs
	//		RCS Pressure System Supports: 10.6 lbs
	//		Paint & Finishes: 40.0 lbs
	//		Nitrogen Purge: 4.2 lbs
	//		ALEM Structure Provision Delta: 998.4 lbs
	//	TPS: 337.6 lbs
	//		Forward Section Insulation: 4.0 lbs
	//		Center Section Insulation: 107.9 lbs
	//		Mounting Provisions: 57.2 lbs
	//		SPS Tanks Insulation: 36.3 lbs
	//		Bulkhead Insulation: 16.7 lbs
	//		Boost Protect & RCS Plume Shield: 77.8 lbs
	//		SPS Engine Closeout: 37.7 lbs
	//	Propulsion: 2289.1 lbs
	//			Main Propulsion: 1938.6 lbs
	//		Drains: 2.7 lbs
	//		Temperature Controls: 5.0 lbs
	//		Flight Combustion Stability Mo: 0.3 lbs
	//		Tanks: 385.2 lbs
	//		Lower Skirts & Rings: 33.4 lbs
	//		Upper Skirts, Rings & Supports: 6.5 lbs
	//		Internal Supports: 7.5 lbs
	//		Tanks & Doors: 16.8 lbs
	//		Plumbing & Fittings: 27.3 lbs
	//		Valves & Regulators: 2.2 lbs
	//		Quantity Indication: 37.2 lbs
	//		Temperature Control: 1.5 lbs
	//		Supports: 2.6 lbs
	//		Zero G Controls & Baffles: 71.6 lbs
	//		Tanks: 385.2 lbs
	//		Lower Skirts & Rings: 33.4 lbs
	//		Upper Skirts, Rings & Supports: 6.5 lbs
	//		Internal Supports: 7.5 lbs
	//		Tanks & Doors: 20.4 lbs.
	//		Plumbing & Fittings: 23.4 lbs
	//		Valves & Regulators: 2.1 lbs
	//		Quantity Indication: 37.0 lbs
	//		Mixture Ratio Controls: 18.3 lbs
	//		Temperature Control: 1.9 lbs
	//		Supports: 2.2 lbs
	//		Zero G Controls & Baffles: 71.5 lbs
	//		Tanks: 636.0 lbs
	//		Tank Supports: 2.4 lbs
	//		Plumbing & Fittings: 31.2 lbs
	//		Valves & Regulators: 36.4 lbs
	//		Heat Exchanger: 16.7 lbs
	//		Supports: 6.7 lbs
	//			RCS Propulsion: 350.5 lbs
	//		Temperature Control: 1.2 lbs
	//		Supports: 1.0 lbs
	//		Tanks & Expulsion: 56.4 lbs
	//		Plumbing & Fittings: 8.2 lbs
	//		Valves & Regulators: 27.6 lbs
	//		Temperature Control: 0.4 lbs
	//		Supports: 9.8 lbs
	//		Tanks & Explusion: 62.4 lbs
	//		Plumbing & Fittings: 11.8 lbs
	//		Valves & Regulators: 19.6 lbs
	//		Temperature Control: 0.4 lbs
	//		Supports: 9.2 lbs
	//		Tanks: 46.0 lbs
	//		Plumbing & Fittings: 13.2 lbs
	//		Valves & Regulators: 50.4 lbs
	//		Supports: 2.0 lbs
	//		Supports, Conduits, Etc: 2.9 lbs
	//		Wiring - Common Utility: 28.0 lbs
	//	Power: 2021 lbs
	//		H2 System Subcontractor Items: 151.6 lbs
	//		H2 System Plumbing: 5.6 lbs
	//		H2 System Valves: 11.5 lbs
	//		H2 System Supports: 2.7 lbs
	//		O2 System Subcontractor Items: 175.1 lbs
	//		O2 System Plumbing: 6.1 lbs
	//		O2 System Valves: 23.1 lbs
	//		O2 System Supports: 2.5 lbs
	//		Fuel Cell Sys Contractor Items: 711.0 lbs
	//		Fuel Cell Sys Plumbing: 16.8 lbs
	//		Fuel Cell Sys Supports:: 17.4 lbs
	//		Fuel Cell Sys Water Glycol: 24.4 lbs
	//		Fuel Cell Sys Space Radiators: 29.6 lbs
	//		Fuel Cell Sys KOH: 10.0 lbs
	//		Power Distrubution Box: 42.6 lbs
	//		Cryo Elec Control Box: 11.5 lbs
	//		Terminal Distrubution Panels: 7.5 lbs
	//		Supports & Installation Prov: 7.1 lbs
	//		SPS Control Box: 16.5 lbs
	//		Electrical Harness Installation: 486.3
	//		Circuit Interrupters: 8.6 lbs
	//		Supports & Installation Provis: 62.5 lbs
	//		SM Jettison Controller: 13.6 lbs
	//		Supports & Hardware: 0.1 lbs
	//		ALEM EPS Delta: 177.3 lbs
	//	Avionics: 294.5 lbs
	//		Signal Conditioners: 16.7 lbs
	//		Transducers: 33.1 lbs
	//		Miscellaneous: 13.8 lbs
	//		Radiation Detection: 8.0 lbs
	//		Sensor Electrical Provision: 0.2 lbs
	//		Wiring - Common Utility: 1.8 lbs
	//		SPS Fuel Gauging Provision: 1.8 lbs
	//		Supports: 13.0 lbs
	//		ALEM Instrumentation Delta: 205.3 lbs
	//		Supports: 0.8 lbs
	//	Enviroment: 221.0 lbs
	//		WGC Valves: 9.8 lbs
	//		WGC Controls: 21.9 lbs
	//		WGC Plumbing%SID: 15.8 lbs
	//		WGC Space Radiator%SID: 102.4 lbs
	//		WGC Supports & Hardware: 15.7 lbs
	//		WSS Plumbing%SID: 0.6 lbs
	//		WSS Support & Attach Parts: 0.3 lbs
	//		HTS Plumbing & Fittings: 9.1 lbs
	//		HTS Supports: 6.9 lbs
	//		HTS Heat Transfer Fluid: 30.7 lbs
	//		HTS Miscellaneous Fluid: 2.9 lbs
	//		HTS Installation Hardware: 4.9 lbs
	//	Other: 933.8 lbs
	//		Pyrotechnics: 1.0 lbs
	//		Manufacturing Variations: -100.0 lbs
	//		Transponder: 14.8 lbs
	//		Waveguide: 1.5 lbs
	//		Antenna Kit: 0.6 lbs
	//		Miscellaneous: 0.6 lbs
	//		Pyrotechnic Initiators: 0.4 lbs
	//		Miscellaneous: 135.0 lbs
	//		ALEM GFE Delta: 879.9 lbs
	//	================================================================================
	//TOTAL DRY MASS: 10606.7 lbs
	//	Structure: 3226.5 lbs
	//	TPS: 544.2 lbs
	//	Propulsion: 3192.6 lbs
	//	Power: 2042.7 lbs
	//	Avionics: 427.4 lbs
	//	Enviroment: 221.0 lbs
	//	Other: 952.3

	//	================================================================================
	//Apollo Service Module Inert Mass Breakdowns:
	//	================================================================================
	//SM: 352.4 lbs
	//	Non-Cargo: 352.4 lbs
	//		RCS Residuals Fuel: 8.4 lbs
	//		RCS Residuals Oxidzier: 18.0 lbs
	//		RCS Residuals Helium: 6.0 lbs
	//		Electrical Pwr Residuals Hydrogen: 2.4 lbs
	//		Electrical Pwr Residuals Oxygen: 9.2 lbs
	//		ALEM EPS Non Expendable Delta: 5.8 lbs
	//		ECS Residuals Oxygen: 4.0 lbs
	//		ALEM ECS Non Expendable Delta: 2.0 lbs
	//		Storage Bottles: 87.6 lbs
	//		Propellant Tanks: 5.4 lbs
	//		Nitrogen: 1.3 lbs
	//		Engine - Outside Tank Oxid: 47.4 lbs
	//		Feed Line - Outside Tank Oxid: 44.7 lbs
	//		Transfer Line - Outside Tank Oxid: 31.6 lbs
	//		Engine-Outside Tank Fuel: 29.6 lbs
	//		Feed Line-Outside Tank Fuel: 29.5 lbs
	//		Transfer Line - Outside Tank Fuel: 19.5 lbs
	//			Since RF already gives the Apollo SPS residuals, ignore precalculated residuals
	//			Add these to the wet mass instead
		//		Residual Fuel: 199.0 lbs
		//		Residual Oxidizer: 382.1 lbs
	//	Cargo: 0 lbs
	//		ALEM Scientific Equipment: 50 lbs (excluded, we have dedicated parts for this)
	//INERT MASS: 352.4 lbs

	//TOTAL INERT MASS: 10959.1 lbs (+50 lbs cargo)

	//	================================================================================
	//Apollo Service Module Wet Mass Breakdowns:
	//	================================================================================
	//SM: 43475.8 lbs
	//	Non-Propellant: 998.4 lbs
	//		Hydrogen EPS: 53.0 lbs
	//		Oxygen EPS: 472.8 lbs
	//		ALEM EPS Expendable Delta: 252.1 lbs (just divide this among EPS load. 226.7 lbs O2, 25.4 lbs H2)
	//		Oxygen ECS: 147.0 lbs
	//		ALEM ECS Expendable Delta: 73.5 lbs (just add to ECS load. 73.5 lbs O2)
	//	Propellant: 42477.4 lbs
	//		RCS Fuel Usable: 432.4 lbs
	//		RCS Oxidizer Usable: 883.6 lbs
	//		(~87.41 lbs He, 15766 lbs A50, 25308 lbs NTO, 41161.4 lbs total according to https://www.hq.nasa.gov/alsj/CSM18_Telecommunications_Subsystem_pp173-188.pdf)
	//		Main Usable: 40594.0 lbs (567.4 lbs short. Very close to stated residuals of 581.1 lbs. Just call it residuals?)
	//		Corrected Main Usable: 41161.4 lbs

	//GROSS MASS: 54434.9 lbs
	//ALL INCLUDED GROSS MASS: 54498.6 lbs (50 lbs cargo, 13.7 lbs unaccounted residuals)

	//	================================================================================
	//Ultimate Part Mass Assignments:
	//	================================================================================
	//	Apollo Decoupler: 177.8 lbs (80.65 kg) v
	//		Dry Mass: 177.8 lbs
	//	================================================================================
	//	Apollo Docking Light: 10.9 lbs (4.94 kg) v
	//		Dry Mass: 10.9 lbs
	//	================================================================================
	//	Apollo Engine Mount: 593.8 lbs (269.34) v
	//		Dry Mass: 593.8 lbs
	//	================================================================================
	//	Apollo EVA Light: 10.8 lbs (4.90 kg) v
	//		Dry Mass: 10.8 lbs
	//	================================================================================
	//	Apollo HGA: 98.1 lbs (44.50 kg) v
	//		Dry Mass: 98.1 lbs
	//	================================================================================
	//	Apollo RCS: 31.5 lbs (14.29 kg) (x4)
	//		Dry Mass: 31.5 lbs
	//	================================================================================
	//	Apollo Scimitar Antenna: 17.4 lbs (7.89 kg) (x2)
	//		Dry Mass: 17.4 lbs
	//	================================================================================
	//	Apollo SPS: 821.1 lbs (372.44 kg)
	//		Dry Mass: 821.1 lbs
	//	================================================================================
	//	Apollo SM: 9085.8 lbs (4121.25 kg)
	//		Dry Mass: 8733.4 lbs
	//		Inert Mass: 352.4 lbs
	//	================================================================================
	//TOTAL INERT MASS: 10959.1 lbs (4970.96 kg)

	//	================================================================================
	//Ultimate Part Resource Assignments:
	//	================================================================================
	//SM:
	//	SM Propellant: 17494.1 L
	//		RCS MMH: 222.9 L
	//		RCS NTO: 276.4 L
	//		RCS Helium: 4400 L (/200) (Guess)
	//		SPS A50: 7945.9 L
	//		SPS NTO: 7916.9 L
	//		SPS Helium: 222000 L (/200) (2x 19.6 cubic foot tanks according to https://www.hq.nasa.gov/alsj/CSM18_Telecommunications_Subsystem_pp173-188.pdf )
	//	SM EPS: 780 L
	//		LH2: 501.9 L
	//		LO2: 278.1 L
	//	SM LS: 87.7 L
	//		LO2: 87.7 L
	//	SM EC: 43.2 L
	//		EC: 43200 EC (1,000 EC/L)
	//	SM Excess: 4000 L (Sector 1, Sector 4 and Center Sector only half utilized)
	//TOTAL TANK SIZE: 22405 L 

	//	================================================================================
	//Tank Mass Compensation
	//	================================================================================
	//	SM Propellant Tank (SM-IV): 1679.8 kg
	//	SM EPS/LS Tank (SM-IV): 44.75 kg
	//	SM Batteries (SM-IV): 62.21 kg

	//	============================================================================
	//	Model and Dimensions
	//	============================================================================
	
	MODEL
	{
		model = ROCapsules/Assets/BDB/Apollo/bluedog_Apollo_Block2_SM
	}

	scale = 1.0
	rescaleFactor = 1.5646

	//Historical SIM bay nodes common
	NODE
	{
		name = mappingCam
		transform = mappingCam
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = panoCam
		transform = panoCam
		size = 0
		method = FIXED_JOINT
	}
	NODE //also for the radar
	{
		name = subSatDisp
		transform = subSatDisp
		size = 0
		method = FIXED_JOINT
	}
	//Apollo 15&16
	NODE
	{
		name = GRS
		transform = GRS
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = xrayAlpha
		transform = xrayAlpha
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = massSpec
		transform = massSpec
		size = 0
		method = FIXED_JOINT
	}

	//Apollo 17
	NODE
	{
		name = IRradiometer
		transform = IRradiometer
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = SARrecorder
		transform = SARrecorder
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = UVspec
		transform = UVspec
		size = 0
		method = FIXED_JOINT
	}



	//Universal Storage nodes
	NODE
	{
		name = US2_node1
		transform = US2_node1
		size = 0
		method = HINGE_JOINT
	}
	NODE
	{
		name = US2_node2
		transform = US2_node2
		size = 0
		method = HINGE_JOINT
	}
	NODE
	{
		name = US2_node3
		transform = US2_node3
		size = 0
		method = HINGE_JOINT
	}
	NODE
	{
		name = US2_node4
		transform = US2_node4
		size = 0
		method = HINGE_JOINT
	}

	node_stack_top = 0.0, 1.1215, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -1.3274, 0.0, 0.0, -1.0, 0.0, 2
	// stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,0,1,1,0

	//	============================================================================
	//	Title, Description, Category, Techs
	//	============================================================================
	
	title = #ApolloSMB2BDBTitle	//Apollo Service Module (SM)
	manufacturer = #roMfrNARockwell //North American Rockwell
	description = #ApolloSMB2BDBDesc	//The Apollo Service Module contains the main propellant tanks, the fuel cells, life support and everything else that it is needed for a flight to the Moon.
	
	mass = 2.30360	//4121.25 kg - 30.89 kg (SIM Bay Door) - 1679.8 kg (Prop Tanks) - 44.75 (LS/EPS Tanks) - 62.21 (Batteries) = 2303.60 kg
	CoMOffset = 0.0, -0.6, 0.0
	
	category = FuelTank
	subcategory = 0
	
	tags = apollo, moon, lunar, crew, armstrong, aldrin, sm, csm, saturn, v, service, module
	
	TechRequired = unlockParts
	cost = 150
	entryCost = 1
	
	stageOffset = 1
	childStageOffset = 1
	stagingIcon = DECOUPLER_HOR
	fuelCrossFeed = true
	
	//	============================================================================
	//	Thermo, Durability
	//	============================================================================
		
	crashTolerance = 10
	maxTemp = 673.15
	skinMaxTemp = 773.15
	breakingForce = 250
	breakingTorque = 250
	
	//	============================================================================
	//	Modules and Resources
	//	============================================================================

	MODULE
	{
		name = ModuleJettison
		jettisonName = SIM_bay_door
		jettisonedObjectMass = 0.03089
		jettisonDirection = 0,0,0
		jettisonForce = 50
		autoDeploy = false

		toggleJettisonEditorGuiName = #ApolloSMB2BDBBayToggle	// Toggle SIM Bay Door
		jettisonGuiName = #ApolloSMB2BDBBayJettison	// Jettison SIM Bay Door
	}

	MODULE
	{
		name = ModuleCargoBay
		DeployModuleIndex = 0
		closedPosition = 0
		lookupRadius = 1.8
		lookupCenter = 0.772, -0.405, -0.772
	}

	MODULE
	{
		name = FlagDecal
		textureQuadName = flag_1
	}

	MODULE
	{
		name = FlagDecal
		textureQuadName = flag_2
	}

	//	Three alkaline fuel cell modules (rated 28 V @ 1500 W max continuous output power each).
	//	Using 1400 W output power as the nominal max value here (range 400 W to 1420 W each),
	//	since the fuel cells can automatically throttle down if the batteries are charged.

	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell #1
		AlwaysActive = False
		StartActionName = Start Fuel Cell #1
		StopActionName = Stop Fuel Cell #1
		FillAmount = 1.0
		AutoShutdown = False
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0002285212
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 0.0001126361
			FlowMode = STAGE_PRIORITY_FLOW
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.4
			DumpExcess = False
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0001447086
			DumpExcess = True
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}

	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell #2
		AlwaysActive = False
		StartActionName = Start Fuel Cell #2
		StopActionName = Stop Fuel Cell #2
		FillAmount = 1.0
		AutoShutdown = False
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0002285212
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 0.0001126361
			FlowMode = STAGE_PRIORITY_FLOW
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.4
			DumpExcess = False
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0001447086
			DumpExcess = True
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}

	MODULE:NEEDS[!Kerbalism]
	{
		name = ModuleResourceConverter
		ConverterName = Fuel Cell #3
		AlwaysActive = False
		StartActionName = Start Fuel Cell #3
		StopActionName = Stop Fuel Cell #3
		FillAmount = 1.0
		AutoShutdown = False
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0002285212
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 0.0001126361
			FlowMode = STAGE_PRIORITY_FLOW
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.4
			DumpExcess = False
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.0001447086
			DumpExcess = True
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}

	MODULE
	{
		name = ModuleFuelTanks
		type = SM-IV
		volume = 22535
		basemass = 2.30360

		//	One battery ~12 kWh (28 V @ 400 Ah, added post Apollo 13).
		TANK
		{
			name = ElectricCharge
			amount = 0
			maxAmount = 43200
		}

		TANK
		{
			name = LqdHydrogen
			amount = 501.9
			maxAmount = 501.9
			isDewar = True
		}

		TANK
		{
			name = LqdOxygen
			amount = 365.8
			maxAmount = 365.8	//278.1 L EPS, 87.7 L ECS
			isDewar = True
		}

		TANK	//15,831.3 lbs SPS
		{
			name = Aerozine50
			amount = 7978.83
			maxAmount = 7978.83
		}

		TANK	//432.4 lbs ACS
		{
			name = MMH
			amount = 222.88
			maxAmount = 222.88
		}

		TANK
		{
			// 25,330.1 lbs SPS, 883.6 lbs ACS
			name = MON1
			amount = 8291.14
			maxAmount = 8291.14
		}
		
		// Pressurant
		TANK
		{
			name = Helium
			amount = 226400
			maxAmount = 226400
		}
	}

	//	============================================================================
	//	Animations and Textures
	//	============================================================================

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchSIMbay
		switcherDescription = SIM Bay Configuration
		switcherDescriptionPlural = SIM Bay Configurations
		affectDragCubes = False
		affectFARVoxels = False
		SUBTYPE
		{
			name = Historical
			transform = SIMbayHistorical
			node = mappingCam
			node = panoCam
			node = subSatDisp
			node = IRradiometer
			node = SARrecorder
			node = UVspec
			node = GRS
			node = massSpec
			node = xrayAlpha
		}
		SUBTYPE
		{
			name = Empty
			transform = simBayBare
		}
		SUBTYPE
		{
			name = Universal Storage
			transform = SimBayUS2
			node = US2_node1
			node = US2_node2
			node = US2_node3
			node = US2_node4
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchNodes
		switcherDescription = SIM Bay Node
		switcherDescriptionPlural = SIM Bay Nodes
		SUBTYPE
		{
			name = Apollo 15 & 16
			node = mappingCam
			node = panoCam
			node = subSatDisp
			node = GRS
			node = massSpec
			node = xrayAlpha
		}
		SUBTYPE
		{
			name = Apollo 17
			node = mappingCam
			node = panoCam
			node = subSatDisp
			node = IRradiometer
			node = SARrecorder
			node = UVspec
		}
		SUBTYPE
		{
			name = None
		}
	}

	fx_gasBurst_white = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, decouple
	sound_decoupler_fire = decouple
}

//	================================================================================
//	TAC Life Support Compatibility
//	================================================================================

@PART[ROC-ApolloSMB2BDB]:FOR[RealismOverhaulTACLS]:NEEDS[TacLifeSupport]
{
	//	LOX to GOX converter. Converts the liquid oxygen into gas oxygen for
	//	the life support system with a maximum rated output of ~1.4 lb/h.

	MODULE
	{
		name = TacGenericConverter
		converterName = LOX to GOX Converter
		tag = Life Support
		StartActionName = Start LOX to GOX Converter
		StopActionName = Stop LOX to GOX Converter
		conversionRate = 1.0
		GeneratesHeat = False
		UseSpecialistBonus = False

		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 0.0000154599
			FlowMode = STAGE_PRIORITY_FLOW
		}

		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 0.05
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Oxygen
			Ratio = 0.0125104279
			DumpExcess = False
			FlowMode = STAGE_PRIORITY_FLOW
		}
	}
}

//	================================================================================
//	Configure RealAntennas
//	================================================================================
@PART[ROC-ApolloSMB2BDB]:BEFORE[RealAntennas]:NEEDS[RealAntennas]
{
	//Subtract VHF antenna mass from here to simulate VHF antenna radios
	//In reality one radio shared both antennas, so just subtract the mass of one.

	@mass -= 0.0217	//Subtract 21.7 kg for a 30 dbm TL 5 antenna

	@MODULE[ModuleFuelTanks]
	{
		@basemass -= 0.0217
	}
}


@PART[ROC-ApolloSMB2BDB]:AFTER[zzzRealismOverhaul]
{
	@MODULE[ModuleToggleCrossfeed]
	{
		@crossfeedStatus = True
	}
}
